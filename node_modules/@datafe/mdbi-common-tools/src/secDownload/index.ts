/**
 * 创建script标签，引入文枢SDK包
 */
function createScript() {
  const script = document.createElement('script')
  script.src =
    'https://s3plus.meituan.net/v1/mss_77a90a9e62374a14a95a15d8334bd502/sec-db-download/lib/sec_db_download.js'
  const htmlEl = window.document.querySelector('html')
  htmlEl && htmlEl.appendChild(script)
}

createScript()

/**
 * 使用文枢安全下载
 */
export function secDownload(url: string, misid: string, target?: string) {
  try {
    if (!window.secDBDownload) {
      window.open(url, target)
      return
    }
    window.secDBDownload.downloadFile(url, misid)
  } catch (error) {
    console.log(error)
    window.open(url, target)
  }
}
