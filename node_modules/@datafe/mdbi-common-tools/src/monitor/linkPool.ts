import { Link, TAGS } from './link'

export class LinkPool {
  private pool: {
    [id: string]: Link
  } = {}

  createLink(linkId?: string | number) {
    const linkInst = new Link(linkId)
    this.pool[linkInst.id] = linkInst
    return linkInst
  }

  getLink(linkId: string | number): Link | undefined {
    return this.pool[linkId]
  }

  getOrCreateLink(linkId: string | number) {
    return this.getLink(linkId) || this.createLink(linkId)
  }

  addPoint(linkId: string | number, pointName: string, tags?: TAGS) {
    const linkInst = this.getLink(linkId)
    linkInst && linkInst.add(pointName, tags)
  }

  endPoint(linkId: string | number, pointName: string, tags?: TAGS) {
    const linkInst = this.getLink(linkId)
    linkInst && linkInst.end(pointName, tags)
  }
}
