/**
 * @Desc
 * @Author leon <leondwong@gmail.com>
 * @Date 8/2/18
 */
import { ConfigsInConfigInfo } from "../types";
import { configMappingModel } from '../config/const';

/**
 * formal config object translator
 *
 * @param {Object} data - serialized data
 * */
export function configModelTranslator(data: ConfigsInConfigInfo): any {
    let keys = Object.keys(configMappingModel);

    return keys.reduce((result, key) => {
        let layerArr = configMappingModel[key].layer.split('.');

        // at the root of object
        if (layerArr[0] === '') return Object.assign(result, {
            [key]: data[key],
        });

        let value = layerArr
            .reduce((original, layer) => original[layer], data)[key];

        return Object.assign(result, {
            [key]: value,
        });
    }, {});
}