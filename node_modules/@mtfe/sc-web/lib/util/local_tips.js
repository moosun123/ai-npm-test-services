import tips from "./tips";
export function localHostTips({ loginUrl, loginOrigin }) {
    const timestamp = +new Date();
    return new Promise((resolve, reject) => {
        const { destroy } = tips('您的登录状态已失效，点击本消息完成登录，以正常使用服务', () => {
            window.open(`${loginUrl}?openerOrigin=${location.origin}&timestamp=${timestamp}`, '_blank');
            window.addEventListener("message", (event) => {
                const origin = event.origin || event.originalEvent.origin;
                if (origin != loginOrigin || event.data.timestamp != timestamp)
                    return;
                if (event.data.code === 200) {
                    resolve(event);
                    destroy();
                }
                else {
                    console.error('登陆sc失败，请检查登录窗口是否被浏览器拦截');
                    reject();
                }
            });
        });
    });
}
//# sourceMappingURL=local_tips.js.map