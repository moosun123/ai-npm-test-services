"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildTS = void 0;
const fs = require('fs');
const path = require('path');
const upperCamelCase = require('uppercamelcase');
function buildTS() {
    const programPath = process.cwd();
    const Components = require(path.join(programPath, './components.json'));
    const OUTPUT_PATH = path.join(programPath, './types/index.d.ts');
    const importComponentTemplate = [];
    const listTemplate = [];
    Object.keys(Components).forEach(name => {
        const componentName = upperCamelCase(name);
        const path = `./${name}`;
        if (['message', 'notification', 'confirm'].includes(name)) {
            return;
        }
        else {
            importComponentTemplate.push(`import { ${componentName} } from '${path}';`);
        }
        listTemplate.push(componentName);
    });
    const importStr = importComponentTemplate.join('\n');
    const listStr = listTemplate.join(',\n  ');
    const template = `
        /* Automatically generated by cm tool */
        ${importStr}
        export {
        ${listStr}
        };
        export declare function install(vue: any): void;
    `;
    fs.writeFileSync(OUTPUT_PATH, template);
    console.log('[build ts] DONE:', OUTPUT_PATH);
    process.exit(0);
}
exports.buildTS = buildTS;
