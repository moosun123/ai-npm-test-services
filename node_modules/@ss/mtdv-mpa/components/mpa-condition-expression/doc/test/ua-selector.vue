<template>
    <div class="selector-container">
        <mtd-form :model="value" ref="formCustom" :rules="ruleCustom" inline class="my-case">
            <mtd-form-item prop="input">
                <mtd-input v-model="value.input" :disabled="disabled" placeholder="具体文案" />
            </mtd-form-item>
            <mtd-form-item prop="selector">
                <mtd-select v-model="value.selector" :disabled="disabled" style="width: 200px">
                    <mtd-option
                        v-for="item in options"
                        :key="item.value"
                        :label="item.label"
                        :value="item.value"
                        :disabled="item.disabled"
                    />
                </mtd-select>
            </mtd-form-item>
        </mtd-form>
    </div>
</template>
<script lang="ts">
import { Vue, Component, Prop } from 'vue-property-decorator';
@Component
export default class UaSelector extends Vue {
    @Prop({
        type: Object,
        default: () => {
            return {
                input: '',
                selector: 1,
            };
        },
    })
    private value;

    @Prop({ type: Boolean, default: false })
    private disabled;

    private ruleCustom = {
        input: {
            required: true,
        },
        selector: {
            required: true,
        },
    };

    private options = [
        {
            label: 1,
            value: 1,
        },
        {
            label: 2,
            value: 2,
        },
    ];

    // 自己定义校验
    // public validate() {
    //     if (!this.value.input) {
    //         return '输入不能为空';
    //     }
    //     return '';
    // }

    // 使用表达自带校验
    public validate() {
        return new Promise((res, rej) => {
            (this.$refs.formCustom as any).validate(valid => {
                res(valid);
            });
        });
    }
}
</script>
<style lang="scss" scoped>
.selector-container {
    > div {
        margin-right: 10px;
        &:last-child {
            margin-right: 0px;
        }
    }
}
.my-case {
    .mtd-form-item {
        margin-bottom: 0px;
    }
}
</style>
