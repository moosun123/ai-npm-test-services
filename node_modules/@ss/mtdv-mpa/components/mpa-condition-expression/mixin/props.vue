<script lang="ts">
import { Component, Vue, Prop } from 'vue-property-decorator';
const HOVER_LEVEL = 2;
const defaultConditionOptions = [
    {
        label: '且',
        value: 'and',
    },
    {
        label: '或',
        value: 'or',
    },
];
@Component
export default class ChartProps extends Vue {
    @Prop({
        type: Array,
        default: () => {
            return defaultConditionOptions;
        },
    })
    public conditionOptions;

    @Prop({
        type: Object,
        default: () => {
            return {
                conditionType: 'conditionType',
                childConditionList: 'childConditionList',
            };
        },
    })
    public props;

    @Prop({ type: Boolean, default: false })
    public disabled;

    @Prop({ type: Boolean, default: true })
    public hoverAdd;

    @Prop({ type: Boolean, default: false})
    public editHeader;

    @Prop({ type: String, default: '并且满足'})
    public filterText;

    @Prop({ type: String, default: '90px'})
    public filterTextWidth;

    @Prop({ type: Number, default: HOVER_LEVEL})
    public hoverLevel;

    @Prop({ type: Boolean, default: true })
    public filterHeighLight;

    @Prop({type: Boolean, default: true})
    public addChildButton;

    @Prop({ type: Number, default: HOVER_LEVEL})
    public addChildButtonLevel;

    public baseHoverLevel = HOVER_LEVEL;

    public firstConditionLevel = HOVER_LEVEL;

    public get childConditionListAttr() {
        return this.props.childConditionList;
    }

    public get conditionTypeAttr() {
        return this.props.conditionType;
    }

    public get fixedHovelLevel() {
        return this.hoverLevel >= this.baseHoverLevel ?
            (this.addChildButtonLevel || this.hoverLevel)
            :
            this.baseHoverLevel;
    }

    public get firstConditionTypeValue() {
        if (this.conditionOptions && this.conditionOptions.length) {
            return this.conditionOptions[0].value;
        } else {
            return '';
        }
    }

    public get secondConditionTypeValue() {
        if (Array.isArray(this.conditionOptions) && this.conditionOptions.length > 1) {
            return this.conditionOptions[1].value;
        } else {
            return null;
        }
    }

    public get addChildBtn() {
        if (!this.hoverAdd) {
            return false;
        } else {
            return this.addChildButton;
        }
    }

    private get defaultOptionsEnum() {
        return defaultConditionOptions.map(it => it.value);
    }

    public get isDefaultConditionOptions() {
        return this.conditionOptions.length === defaultConditionOptions.length
            && this.conditionOptions.every(it => this.defaultOptionsEnum.includes(it.value));
    }
}
</script>
