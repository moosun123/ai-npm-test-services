<template>
    <div :class="[prefix + '-category']">
        <div
            v-for="item in data"
            :key="item.value"
            :class="[
                prefix + '-category-item',
                item.value === activeValue ? prefix + '-category-active' : '',
            ]"
            @click="handleCategoryChange(item.value)"
        >{{ item.label }}</div>
    </div>
</template>
<script lang="ts">
import { Vue, Component, Prop, Inject } from 'vue-property-decorator';
import { ICustomOptionItem } from '../types';

@Component
export default class CityCategoryTabs extends Vue {
    @Prop({
        type: Array,
        required: true,
    })
    data!: ICustomOptionItem[];

    @Inject()
    private prefix!: string;

    private activeValue: string = '';

    private handleCategoryChange(value: string) {
        if (this.activeValue !== value) {
            this.activeValue = value;
            this.$emit('change', value);
        }
    }

    private created() {
        if (this.data) {
            const activeItem: ICustomOptionItem = this.data.find(
                (item: ICustomOptionItem) => item.active,
            ) as ICustomOptionItem;
            this.activeValue = activeItem ? activeItem.value : this.data[0].value;
        }
    }
}
</script>
