<template>
    <MpaCitySelect
        :data-source-type="dataSourceType"
        :loading="loading"
        :category-data="categoryData"
        :data="renderData"
        :leaf-level="leafLevel"
        :multiple="true"
        :clearable="true"
        :searchText="searchText"
        :select-any-level="true"
        :append-to-body="true"
        :use-default-data="false"
        placeholder="选择地区"
        @category-change="handleCategoryChange"
    >
    </MpaCitySelect>
</template>
<style></style>
<script lang="ts">
import { Vue, Component } from 'vue-property-decorator';
import MpaCitySelect from '../index';
import { ICustomOptionItem } from '../types';
import regionsData from '../mock/areaByRegions';
import levelData from '../mock/areaByLevel';
import bussinessData from '../mock/cityByBussiness';

@Component({
    components: {
        MpaCitySelect,
    },
})
export default class AnalysisCase extends Vue {
    private categoryData: ICustomOptionItem[] = [
        { label: '按行政区', value: 'regions' },
        { label: '按级别', value: 'level' },
        { label: '按业务大区', value: 'bussiness' },
    ];

    private dataSourceType: string = 'regions';

    private loading: boolean = true;

    private dataMaps: Record<string, ICustomOptionItem[]> = {
        regions: regionsData as ICustomOptionItem[],
        level: levelData as ICustomOptionItem[],
        bussiness: bussinessData as ICustomOptionItem[],
    };

    private leafLevelMaps: Record<string, number> = {
        regions: 3,
        level: 2,
        bussiness: 3,
    };

    private searchTextMaps: Record<string, string> = {
        regions: '搜索省份/城市/区县',
        level: '搜索城市',
        bussiness: '搜索省份/城市',
    };

    private get leafLevel() {
        return this.leafLevelMaps[this.dataSourceType];
    }

    private get renderData() {
        return this.dataMaps[this.dataSourceType];
    }

    private get searchText() {
        return this.searchTextMaps[this.dataSourceType];
    }

    private handleCategoryChange() {
        this.loading = true;
        this.end();
    }

    private end() {
        setTimeout(() => {
            this.loading = false;
        }, 1000);
    }

    private created() {
        this.end();
    }
}
</script>
<style lang="scss" scoped></style>
