"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTeam = exports.addTeamMembers = void 0;
const log_1 = require("../util/log");
const login_1 = require("./login");
const constant_1 = require("../util/constant");
const fetch = require('node-fetch');
const addTeamMembers = async (addParams) => {
    (0, login_1.checkLogin)();
    const _octo = await (0, constant_1.getSignature)();
    try {
        const value = await fetch(`${constant_1.envHost}/openapi/v1/team/addMember`, {
            method: 'POST',
            body: JSON.stringify(addParams),
            headers: {
                "Content-Type": 'application/json',
                "oceanus-auth": _octo
            },
        });
        const res = await value.json();
        if (res.code !== 0) {
            (0, log_1.fatalLog)(res.message);
        }
        else {
            return res || {};
        }
    }
    catch (e) {
        (0, log_1.fatalLog)(`add team members failed: ${e}.`);
    }
};
exports.addTeamMembers = addTeamMembers;
const createTeam = async (createParams) => {
    (0, login_1.checkLogin)();
    const _octo = await (0, constant_1.getSignature)();
    try {
        const value = await fetch(`${constant_1.envHost}/openapi/v1/team/create`, {
            method: 'POST',
            body: JSON.stringify(createParams),
            headers: {
                "Content-Type": 'application/json',
                "oceanus-auth": _octo
            },
        });
        const res = await value.json();
        if (res.code !== 0) {
            (0, log_1.fatalLog)(res.message);
        }
        else {
            return res.data || {};
        }
    }
    catch (e) {
        (0, log_1.fatalLog)(`create team failed: ${e}.`);
    }
};
exports.createTeam = createTeam;
