<template>
  <form class="test-form">
    <div class="test-form-header">
      <slot name="header">
        <p class="default-header">this is an default header slot</p>
      </slot>
    </div>
    <input :value="innerValue" @input="handleInnerInput">
    <input :value="syncValue" @input="handleSyncInput">
    <slot />
    <div class="test-form-footer">
      <slot name="footer" />
    </div>
    <button @click="handleSave" class="btn-save">保存</button>
    <button @click="handleCancel" class="btn-cancel">取消</button>
  </form>
</template>
<script>
export default {
  name: 'TestForm',
  props: {
    defaultInnerValue: {
      type: String,
      default: '',
    },
    syncValue: String,
  },
  data () {
    return {
      innerValue: this.defaultInnerValue,
    };
  },
  methods: {
    handleInnerInput (v) {
      this.innerValue = v;
    },
    handleSyncInput (v) {
      this.$emit('update:syncValue', v);
    },
    handleSave () {
      this.$emit('save', {
        innerValue: this.innerValue,
        syncValue: this.syncValue,
      });
    },
    handleCancel (e) {
      this.$emit('cancel', e);
    },
  },
};
</script>
