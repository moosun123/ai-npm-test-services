
const currentVersion = require('../../package.json').version;
const semver = require('semver');
const chalk = require('chalk');
const talos = require('./talos-message.js');
const importToComponent = require('./component.js');

const tag = semver.prerelease(currentVersion);
if (tag) {
  // skip tag version
  console.log(`========= skip publish hook by version ${currentVersion} =======`);
  return;
}

const hooks = {
  talos,
  importToComponent,
}
Object.keys(hooks).forEach((name) => {
  const fn = hooks[name];
  console.log('start hook:', name)
  fn().then((msg) => {
    console.log(name, 'response success: \n', chalk.green(msg));
  }).catch((e) => {
    console.log(name, 'response error: \n', chalk.red(e));
  });
});
