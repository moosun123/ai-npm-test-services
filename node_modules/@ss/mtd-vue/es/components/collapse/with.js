import createHoc from '@ss/mtd-vue/es/utils/hoc';

export default function withCollapse(name, Component) {
  return createHoc({
    name: name,
    props: {
      value: [String, Number, Boolean, Object, Array]
    },
    inject: ['collapse'],
    computed: {
      active: function active() {
        var isArray = Array.isArray(this.collapse.value);
        return isArray ? this.collapse.value.indexOf(this.value) > -1 : this.collapse.value === this.value;
      }
    }
  }, {
    mapStateToProps: function mapStateToProps(context) {
      return {
        active: context.active,
        value: context.value
      };
    },
    mapMethodToListener: function mapMethodToListener(context) {
      return {
        'itemClick': function itemClick(active, item) {
          context.collapse.$emit('itemClick', active, item);
        }
      };
    }
  })(Component);
};