<template>
<label
  :class="wrapperCls"
  @click.prevent="handleClick"><input
    :class="`${prefix}-input`"
    type="radio"
    :checked="checked"
    :name="name"
    style="display: none"
  ><span :class="`${prefix}-inner`" /><span :class="`${prefix}-text`">
    <slot>{{ label }}</slot>
  </span>
</label>
</template>
<script>
import { CONFIG_PROVIDER,
  getPrefixCls,
  getSize,
} from '@/utils/config';

export default {
  name: 'Radio',
  props: {
    value: {
      type: [String, Number, Boolean, Function, Object, Array, Symbol],
    },
    disabled: {
      type: Boolean,
      default: false,
    },
    name: {
      type: String,
    },
    checked: {
      type: Boolean,
      default: false,
    },
    size: {
      type: String,
      default: 'normal',
    },
    label: [String, Number],
  },
  inject: {
    config: {
      from: CONFIG_PROVIDER,
      default: {
        getPrefixCls,
        getSize,
      },
    },
  },
  computed: {
    prefix () {
      return this.config.getPrefixCls('radio');
    },
    _size () {
      return this.config.getSize(this);
    },
    wrapperCls () {
      const { prefix } = this;
      return [
        prefix,
        {
          [`${prefix}-checked`]: this.checked,
          [`${prefix}-disabled`]: this.disabled,
          [`${prefix}-${this._size}`]: this._size,
        },
      ];
    },
  },
  methods: {
    handleClick ($event) {
      if (!this.disabled && !this.checked) {
        this.$emit('input', true);
      }
      if (!this.disabled) {
        this.$emit('click', $event);
      }
    },
  },
};
</script>
