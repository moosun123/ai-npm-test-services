<template>
  <div class="mtd-navbar" :class="`mtd-navbar-${theme}`">
    <a class="mtd-navbar-brand" v-bind="logoProps"
      v-if="logo || $slots.logo">
      <slot name="logo">
        <img :src="logo">
      </slot>
    </a>
    <nav-item class="mtd-navbar-user" v-if="avatar"
      align="right" :visible="userVisible"
      @update:visible="handleUserVisibleChange">
      <img class="mtd-navbar-avatar" :src="avatar">
      <span class="mtd-navbar-username">{{ username }}</span>
      <i class="mtdicon mtdicon-triangle mtd-navbar-user-arrow"
        v-show="$slots.userDropdown"
      />
      <div slot="dropdown" v-if="$slots.userDropdown">
        <slot name="userDropdown" />
      </div>
    </nav-item>
    <slot />
  </div>
</template>
<script>
import NavItem from '@components/navbar-item';
export default {
  name: 'MtdNavbar',
  components: {
    NavItem,
  },
  props: {
    theme: {
      type: String,
      default: 'dark',
    },
    logo: String,
    logoProps: {
      type: Object,
      default: () => { return {}; },
    },
    avatar: String,
    username: String,
    userVisible: {
      type: Boolean,
      default: false,
    },
  },
  methods: {
    handleUserVisibleChange (v) {
      this.$emit('update:userVisible', v);
    },
  },
};
</script>
