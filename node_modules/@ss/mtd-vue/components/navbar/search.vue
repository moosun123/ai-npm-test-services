<template>
  <label class="mtd-navbar-search" :class="{
      'mtd-navbar-item-right': align === 'right',
      'mtd-navbar-search-active': active
    }">
    <div class="mtd-navbar-search-group">
      <input class="mtd-navbar-search-input"
        v-bind="$attrs" :value="value"
        @input="handleSearchInput"
        @blur="handleInputBlur"
        @focus="handleInputFocus"
        @keyup.enter="handleSearch"
      >
      <i class="mtdicon mtdicon-search" @click="handleIconClick" />
    </div>
  </label>
</template>
<script>
export default {
  name: 'MtdNavbarSearch',
  props: {
    value: [String, Number],
    align: {
      type: String,
      default: 'left',
      validator: (v) => {
        return ['left', 'right'].indexOf(v) > -1;
      },
    },
  },
  data () {
    return {
      active: !!this.value,
    };
  },
  methods: {
    handleSearchInput (e) {
      this.$emit('input', e.target.value);
    },
    handleInputBlur () {
      this.active = !!this.value;
    },
    handleInputFocus () {
      this.active = true;
    },
    handleSearch (e) {
      const { target: { value } } = e;
      this.$emit('search', value);
    },
    handleIconClick (e) {
      this.$emit('search', this.value);
    },
  },
};
</script>
