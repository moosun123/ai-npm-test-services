<template>
  <mtd-config-provider prefix-cls="xx" icon-prefix-cls="xxicon">
    <mtd-config-provider prefix-cls="m" ref="p">
      <mtd-button class="test-config-btn">
        <mtd-icon class="icon" name="search" /> xxxxxx
      </mtd-button>
    </mtd-config-provider>
  </mtd-config-provider>
</template>
<script>
export default {
  methods: {
    doTest (done) {
      const el = this.$el.querySelector('.test-config-btn');
      expect(el, 'should mounted button element').to.be.not.eql(null);
      const classes = Array.from(el.classList);
      expect(classes, 'should use Closest prefixCls').to.be.include('m-btn');

      const icon = this.$el.querySelector('.icon');
      expect(icon, 'should has icon').to.be.not.eql(null);
      const iconClasses = Array.from(icon.classList);
      expect(iconClasses).to.be.include('xxicon-search');
      done();
    },
  },
};
</script>
