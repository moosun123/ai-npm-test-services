<template>
  <div :class="{
    [prefix]: true,
    [`${prefix}-active`]: active,
    [`${prefix}-disabled`]: disabled
  }">
    <div :class="`${prefix}-header`" @click="handleClick">
      <i :class="`${collapsePrefix}-arrow ${iconPrefix('right-thick')}`" /><slot
      name="title">{{ title }}</slot>
    </div>
    <mtd-collapse-transition>
      <div v-show="active" :class="`${prefix}-wrapper`">
        <div :class="`${prefix}-content`">
          <slot />
        </div>
      </div>
    </mtd-collapse-transition>
  </div>
</template>
<script>
import MtdCollapseTransition from '@/transitions/collapse-transition';
import { CONFIG_PROVIDER,
  getPrefixCls,
  getIconCls,
} from '@/utils/config';

export default {
  name: 'CollapseItem',
  components: {
    MtdCollapseTransition,
  },
  props: {
    title: String,
    value: [String, Number, Object, Array, Symbol],
    disabled: Boolean,
    active: Boolean,
  },
  inject: {
    config: {
      from: CONFIG_PROVIDER,
      default: {
        getPrefixCls,
        getIconCls,
      },
    },
  },
  computed: {
    prefix () {
      return this.config.getPrefixCls('collapse-item');
    },
    collapsePrefix () {
      return this.config.getPrefixCls('collapse');
    },
    iconPrefix () {
      return this.config.getIconCls;
    },
  },
  methods: {
    handleClick () {
      if (!this.disabled) {
        this.$emit('itemClick', !this.active, this);
      }
    },
  },
};
</script>
