@import "./common/var.scss";
@import "./mixins/mixins.scss";
@import "./mixins/step.scss";

@include c(step) {
  position: relative;
  min-width: $steps-min-width;
  &-flex {
    flex: 1 1 auto;
  }
  &-head {
    position: relative;
    width: 100%;
    text-align: center;

    &-line {
      height: $steps-line-size;
      position: absolute;
      top: ceil(($steps-circle-size - $steps-line-size)/2);
      left: -50%;
      right: 50%;
      padding: 0px $steps-circle-size/2 + $steps-line-padding-horizontal;
      background-clip: content-box;
    }

    // 圆点比普通的圈小
    &-line-dot {
      margin-top: ($steps-circle-size - $steps-dot-size)/2;
    }

    &-number {
      width: $steps-circle-size;
      height: $steps-circle-size;
      border-radius: 50%;
      color: $steps-finish-circle-bgc;
      // border: $step-line-size solid currentColor;
      font-weight: $steps-circletext-font-weight;
      font-size: $steps-circletext-font-size;
      line-height: $steps-circletext-line-height;
      // background: $steps-default-bgc;
      position: relative;
      z-index: $steps-zindex;
      display: inline-flex;
      justify-content: center;
      align-items: center;

      i {
        font-size: 16px;
      }

      // transition: .15s ease-out;
      .#{$prefix}-step-head-dot {
        border-radius: 50%;
        // border: $steps-dot-border-width solid $step-dot-broder-color;
        background: currentColor;
        background-clip: content-box;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        border-width: $steps-dot-border-width;
        border-style: solid;
      }

      @include step-dot($steps-dot-size);
    }

    &-icon {
      width: $steps-circle-size;
      height: $steps-circle-size;
      position: relative;
      z-index: $steps-zindex;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      // padding: 0px $step-icon-padding;
      background-color: $steps-default-bgc;
      font-size: $steps-icon-size;
    }
  }
  &-dot {
    .#{$prefix}-step-head-line {
      padding: 0px $steps-dot-size/2 + $steps-line-padding-horizontal;
      height: $steps-dot-line-size;
    }

    .#{$prefix}-step-main-title {
      padding: $steps-horizontal-dot-margin-vertical
        $steps-horizontal-dot-margin-horizontal;
    }

    >.#{$prefix}-step-head-number {
      // width: auto;
      // height: auto;
      // border: none;
      // background: none;
    }
  }
  &-main {
    text-align: center;

    &-title {
      font-size: $steps-statustext-font-size;
      line-height: $steps-statustext-line-height;
      padding: $steps-horizontal-statustext-margin-vertical
        $steps-horizontal-statustext-margin-horizontal;
      font-weight: $steps-statustext-font-weight;
    }

    &-description {
      font-size: $steps-horizontal-description-font-size;
      line-height: $steps-horizontal-description-line-height;
      font-weight: $steps-horizontal-description-font-weight;
      // color: $step-description-color;
      padding: 0px $steps-horizontal-description-margin-horizontal;
    }
  }
  &-finish {
    @include step-status(
      $steps-finish-circletext-color,
      $steps-finish-circle-bgc,
      $steps-finish-circle-border-color,
      $steps-finish-statustext-color,
      $steps-finish-line-color,
      $steps-finish-description-color,
      $steps-finish-icon-color
    );

    .#{$prefix}-step-main-title {
      font-weight: $steps-finish-circletext-font-weight;
    }

    >.#{$prefix}-step-head-number {
      .#{$prefix}-step-head-dot {
        background-color: $steps-finish-dot-bgc;
        border-color: $steps-finish-dot-border-color;
      }
    }
  }
  &-error {
    @include step-status(
      $steps-error-circletext-color,
      $steps-error-circle-bgc,
      $steps-error-circle-border-color,
      $steps-error-statustext-color,
      $steps-error-line-color,
      $steps-error-description-color,
      $steps-error-icon-color
    );

    .#{$prefix}-step-main-title {
      font-weight: $steps-error-circletext-font-weight;
    }

    >.#{$prefix}-step-head-number {
      .#{$prefix}-step-head-dot {
        background-color: $steps-error-dot-bgc;
        border-color: $steps-error-dot-border-color;
      }
    }
  }
  &-cancel {
    @include step-status(
      $steps-cancel-circletext-color,
      $steps-cancel-circle-bgc,
      $steps-cancel-circle-border-color,
      $steps-cancel-statustext-color,
      $steps-cancel-line-color,
      $steps-cancel-description-color,
      $steps-cancel-icon-color
    );

    .#{$prefix}-step-main-title {
      font-weight: $steps-cancel-circletext-font-weight;
    }

    >.#{$prefix}-step-head-number {
      .#{$prefix}-step-head-dot {
        background-color: $steps-cancel-dot-bgc;
        border-color: $steps-cancel-dot-border-color;
      }
    }
  }
  &-wait {
    @include step-status(
      $steps-wait-circletext-color,
      $steps-wait-circle-bgc,
      $steps-wait-circle-border-color,
      $steps-wait-statustext-color,
      $steps-wait-line-color,
      $steps-wait-description-color,
      $steps-wait-icon-color
    );

    .#{$prefix}-step-main-title {
      font-weight: $steps-wait-circletext-font-weight;
    }

    >.#{$prefix}-step-head-number {
      .#{$prefix}-step-head-dot {
        background-color: $steps-wait-dot-bgc;
        border-color: $steps-wait-dot-border-color;
      }
    }
  }
  &-process {
    @include step-status(
      $steps-process-circletext-color,
      $steps-process-circle-bgc,
      $steps-process-circle-border-color,
      $steps-process-statustext-color,
      $steps-process-line-color,
      $steps-process-description-color,
      $steps-process-icon-color
    );

    .#{$prefix}-step-main-title {
      font-weight: $steps-process-circletext-font-weight;
    }

    >.#{$prefix}-step-head-number {
      @if $steps-process-circle-shadow != none {
        box-shadow: $steps-process-circle-shadow;
      }
      .#{$prefix}-step-head-dot {
        background-color: $steps-process-dot-bgc;
        border-color: $steps-process-dot-border-color;
      }
    }
  }

  // 隐藏第一个step的line
  &:first-child {
    .#{$prefix}-step-head {
      .#{$prefix}-step-head-line {
        display: none;
      }
    }
  }
}

// 居右step的样式
@include c(steps-right) {
  .#{$prefix}-step-head {
    left: -50%;
    margin-left: $steps-circle-size/2;
  }
  .#{$prefix}-step-main {
    position: relative;
    margin: -(
        $steps-circle-size/2 + $steps-statustext-line-height/2 +
          $steps-horizontal-statustext-margin-vertical
      ) 0 0 $steps-circle-size;
    // left: $steps-circle-size;
    // top: -($steps-circle-size/2 + $steps-statustext-line-height/2 + $steps-horizontal-statustext-margin-vertical);
    z-index: $steps-main-zindex;
    text-align: left;

    &-title {
      display: inline-block;
      background: $steps-default-bgc;
      padding: $steps-horizontal-statustext-margin-vertical
        $steps-horizontal-right-statustext-margin-horizontal;
    }

    &-description {
      padding: $steps-horizontal-description-margin-vertical
        $steps-horizontal-description-margin-horizontal;
    }
  }
  // &:last-child {
  //   flex:none;
  // }
}

// 竖step的样式
@include c(steps-vertical) {
  @include step-direction(
    $steps-circle-size,
    $steps-statustext-line-height,
    $steps-dot-size
  );
}

// small step的样式
@include c(steps-small) {
  .#{$prefix}-step-head {
    &-line {
      top: ceil(($steps-small-circle-size - $steps-line-size)/2);
      padding: 0px $steps-small-circle-size/2 + $steps-line-padding-horizontal;
    }

    &-line-dot {
      margin-top: ($steps-small-circle-size - $steps-small-dot-size)/2;
    }

    &-number {
      width: $steps-small-circle-size;
      height: $steps-small-circle-size;
      font-size: $steps-small-circletext-font-size;
      line-height: $steps-small-circletext-line-height;
      @include step-dot($steps-small-dot-size);
    }

    &-icon {
      width: $steps-small-circle-size;
      height: $steps-small-circle-size;
      font-size: $steps-small-icon-size;
    }
  }
  .#{$prefix}-step-dot {
    .#{$prefix}-step-head-line {
      padding: 0px $steps-small-dot-size/2 + $steps-line-padding-horizontal;
    }
  }
  .#{$prefix}-step-main {
    &-title {
      font-size: $steps-small-statustext-font-size;
      line-height: $steps-small-statustext-line-height;
      padding: $steps-small-horizontal-statustext-margin-vertical
        $steps-small-horizontal-statustext-margin-horizontal;
    }

    &-description {
      font-size: $steps-small-horizontal-description-font-size;
      line-height: $steps-small-horizontal-description-line-height;
      font-weight: $steps-horizontal-description-font-weight;
    }
  }
  &.#{$prefix}-steps-right {
    .#{$prefix}-step-head {
      margin-left: $steps-small-circle-size/2;
    }

    .#{$prefix}-step-main {
      margin: -(
          $steps-small-circle-size/2 + $steps-small-statustext-line-height/2 +
            $steps-small-horizontal-statustext-margin-vertical
        ) 0 0 $steps-small-circle-size;

      &-title {
        padding: $steps-small-horizontal-statustext-margin-vertical
          $steps-small-horizontal-right-statustext-margin-horizontal;
      }
    }
  }
  &.#{$prefix}-steps-vertical {
    @include step-direction(
      $steps-small-circle-size,
      $steps-small-statustext-line-height,
      $steps-small-dot-size
    );
  }
}
