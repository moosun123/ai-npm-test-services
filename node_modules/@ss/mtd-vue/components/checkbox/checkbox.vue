<template>
<label
  :class="wrapperCls">
  <input
    :class="`${prefix}-input`"
    type="checkbox"
    :checked="checked"
    @change="handleChange"
    :name="name"
    :disabled="disabled"
    style="display: none"
  >
  <span :class="`${prefix}-inner`">
    <i v-if="indeterminate" :class="`${prefix}-indeterminate-inner`" />
    <i v-else-if="checked" :class="iconPrefix('check-thick')" />
  </span><span
    :class="`${prefix}-text`" v-if="$slots.default">
    <slot>{{ label }}</slot>
  </span>
</label>
</template>
<script>
import { CONFIG_PROVIDER,
  getPrefixCls,
  getIconCls,
  getSize,
} from '@/utils/config';

export default {
  name: 'Checkbox',
  props: {
    // value: [String, Number, Boolean, Function, Object, Symbol],
    size: String,
    disabled: Boolean,
    name: String,
    checked: Boolean,
    indeterminate: Boolean,
    label: [String, Number],
  },
  inject: {
    config: {
      from: CONFIG_PROVIDER,
      default: {
        getPrefixCls,
        getIconCls,
        getSize,
      },
    },
  },
  computed: {
    iconPrefix () {
      return this.config.getIconCls;
    },
    prefix () {
      return this.config.getPrefixCls('checkbox');
    },
    _size () {
      return this.config.getSize(this);
    },
    wrapperCls () {
      return [
        this.prefix,
        {
          [`${this.prefix}-checked`]: this.checked,
          [`${this.prefix}-disabled`]: this.disabled,
          [`${this.prefix}-indeterminate`]: this.indeterminate,
          [`${this.prefix}-${this._size}`]: this._size,
        },
      ];
    },
  },
  methods: {
    handleChange (e) {
      if (!this.disabled) {
        this.$emit('input', !this.checked);
      }
    },
  },
};
</script>
