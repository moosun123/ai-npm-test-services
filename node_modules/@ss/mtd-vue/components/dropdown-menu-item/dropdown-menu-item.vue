<template>
  <li :class="{
      [prefix]: true,
      [`${prefix}-disabled`]: disabled
    }"
    v-on="listeners">
    <slot />
  </li>
</template>
<script>
import {
  CONFIG_PROVIDER,
  getPrefixCls,
  getSize,
} from '@/utils/config';
export default {
  name: 'MtdDropdownMenuItem',
  props: {
    disabled: Boolean,
  },
  inject: {
    dropdown: {
      default: '',
    },
    config: {
      from: CONFIG_PROVIDER,
      default: {
        getPrefixCls,
        getSize,
      },
    },
  },
  computed: {
    listeners () {
      return {
        ...this.$listeners,
        click: this.handleClick,
      };
    },
    prefix () {
      return this.config.getPrefixCls('dropdown-menu-item');
    },
    _size () {
      return this.config.getSize(this);
    },
  },
  methods: {
    handleClick (e) {
      if (this.disabled) {
        return;
      }
      this.$emit('click', e);
      if (this.dropdown) {
        this.dropdown.$emit('itemClick', e);
      }
    },
  },
};
</script>
