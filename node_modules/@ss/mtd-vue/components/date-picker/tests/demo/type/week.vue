<template>
  <mtd-date-picker type="week"
    v-model="value"
    :open.sync="open"
    :start-date="startDate"
    placeholder="选择时间"
    format="yyyy年WW周"
  />
</template>
<script>
import { triggerClick, waitImmediate } from '@test/util';

export default {
  data () {
    return {
      value: undefined,
      open: false,
      startDate: new Date(2019, 11, 30),
    };
  },
  methods: {
    async doTest (done) {
      this.open = true;
      await waitImmediate();
      const pickerEl = document.querySelector('.mtd-picker-panel-body-wrapper');
      expect(pickerEl).to.be.not.undefined();

      // 2019-12-26
      const cellEl = pickerEl.querySelector('.mtd-date-picker-cells-cell:nth-child(4)');
      expect(cellEl).to.be.not.undefined();
      triggerClick(cellEl, true, true);
      await waitImmediate();
      expect(this.value.getTime()).to.be.eql(1574697600000);
      done();
    },
  },
};
</script>
