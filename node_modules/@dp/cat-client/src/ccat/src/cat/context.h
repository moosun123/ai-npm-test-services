#ifndef CAT_CLIENT_C_CONTEXT_H
#define CAT_CLIENT_C_CONTEXT_H

#include "message_tree.h"

#include "lib/cat_stack.h"

#include "cat/transaction.h"

typedef struct _CatContext {
    CatMessageTree *tree;
    CatStack_T stack;
    int elementSize;
    unsigned long long lastTruncateTransDurationUs;
} CatContext;


CatContext *getCatContext();

CatMessageTree *getContextMessageTree();

void clearCatContext();

void resetCatContext();

void catContextAdd(CatMessage *message);

void catContextStartTrans(CatTransaction *trans);

int catContextEndTrans(CatTransaction *trans);

void setCatMessageTreeCanDiscard(int canDiscard);

#endif //CAT_CLIENT_C_CONTEXT_H
