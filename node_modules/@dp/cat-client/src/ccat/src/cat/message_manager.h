#ifndef CAT_CLIENT_C_MESSAGE_MANAGER_H
#define CAT_CLIENT_C_MESSAGE_MANAGER_H

#include "message_tree.h"

#include "lib/cat_atomic.h"

#include "cat/transaction.h"

typedef struct _CatMessageManager {
    catsds domain;
    catsds hostname;
    catsds ip;
    catsds ipHex;

    CAT_ATOMICLONG discardTimes;
} CatMessageManager;

void catMessageManagerAdd(CatMessage *message);

void catMessageManagerEndTrans(CatMessage *trans);

void catMessageManagerFlush(CatMessageTree *tree);

void initMessageManager(const char *domain, const char *hostName);

void destroyCatMessageManager();

void catMessageManagerStartTrans(CatTransaction *trans);

#endif //CAT_CLIENT_C_MESSAGE_MANAGER_H
