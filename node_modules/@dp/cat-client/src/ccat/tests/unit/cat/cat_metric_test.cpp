//
// Created by Terence on 2018/9/14.
//

#include <gtest/gtest.h>

#include <cat/client.h>
#include <lib/cat_time_util.h>

TEST(Metric, test) {
    logMetricForCount("test-1");
    logMetricForCountQuantity("test-2", 5);
    logMetricForDuration("test-3", 100);
    logMetricForLatestValue("test-4", 7);
}

TEST(Metric, helper) {
    CatMetricHelper *helper;

    helper = CatBuildMetricHelper("helper-1");
    helper->AddTag(helper, "category", "a")->AddCount(helper, 1);

    helper = CatBuildMetricHelper("helper-1");
    addMetricTag(helper, "category", "b");
    addMetricCount(helper, 3);

    helper = CatBuildMetricHelper("helper-2");
    helper->AddTag(helper, "category", "a")->AddDuration(helper, 100);

    helper = CatBuildMetricHelper("helper-1");
    addMetricName(helper, "helper-2");
    addMetricTag(helper, "category", "b");
    addMetricDuration(helper, 300);
}
