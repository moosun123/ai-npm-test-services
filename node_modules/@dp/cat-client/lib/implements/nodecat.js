'use strict'

/**
 * Node implement
 */
const config = require('../config')
const sender = require('../message/io/sender')
const once = require('@dp/simple-util').once
const logger = require('../logger')('NodeCat')

let logNotSupport = (methodName) => {
    logger.info('not support ' + methodName + ' yet')
}

let onceMetricCount = once(logNotSupport)
let onceMetricDuration = once(logNotSupport)
let onceLogError = once(logNotSupport)

exports.init = (appKey) => {
    config.setDomain(appKey)
    sender.init()
}

exports.sendTree = (tree) => {
    sender.send(tree)
}

exports.logMetricForCount = () => {
    onceMetricCount('logMetricForCount')
}
exports.logMetricForDuration = () => {
    onceMetricDuration('logMetricForDuration')
}
exports.logError = (name, errString) => {
    onceLogError('logError')
}
