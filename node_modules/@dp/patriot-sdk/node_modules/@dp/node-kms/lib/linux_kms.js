let addon
const assert = require('assert')

if (process.version.indexOf('v6.') === 0) {
    addon = require('../build_linux_v6/Release/api')
} else if (process.version.indexOf('v8.') === 0) {
    addon = require('../build_linux_v8/Release/api')
} else {
    // node8+ 使用 node-addon-api
    addon = require('bindings')('node_kms')
}

module.exports.getKeyByName = function(appKey, name, i) {
    assert(!!appKey, 'appKey cannot be empty.')
    assert(!!name, 'name cannot be empty.')
    i = i ? 1 : 0
    return addon.getKeyByName(appKey, name, i)
}
