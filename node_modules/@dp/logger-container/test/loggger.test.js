const Logger = require('../index')

describe('logger test',()=>{
    it('default',()=>{
        let logger = Logger('Server')
        expect(logger.log).toEqual(console.log)

        logger.info(123)

    })

    it('implement',()=>{
        let logger = Logger('Server')
        let mockfn = jest.fn()
        Logger.implement({
            getLogger: ()=>{
                return {
                    info:mockfn,
                    warn:mockfn,
                    error:()=>{
                        return mockfn
                    }
                }
            }
        })
        let logger2 = Logger('Server2')
        logger.info()
        expect(mockfn).toHaveBeenCalledTimes(1)
        logger2.info()
        expect(mockfn).toHaveBeenCalledTimes(2)

        logger.warn()
        expect(mockfn).toHaveBeenCalledTimes(3)

        expect(logger.error()).toEqual(logger2.error())
    })
})